<h1 align="center">
E2e Testing
</h1>

<h2 align="center">
  <strong>4.0 Testing movies</strong><br>
</h2>

- e2e 테스트(end-to-end)
  => movie와 관련된 어플리케이션의 모든 부분을 테스트할 때 필요<br>
  => import 라이브러리)supertest

_test- file)app.e2e-spec.ts_

```typescript
it("/ (GET)", () => {
  return request(app.getHttpServer())
    .get("/")
    .expect(200)
    .expect("Hello World!");
});
```

=> request) /Get으로 API request보냄<br>
즉, url에 대한 요청을 테스트 / controller, service, pipe의 결과에 대해 모든 테스트를 하고 있음

> 웹사이트 서버에 url을 보내면<br>
> url을 보내고 / 200과 hello world를 받음

- 콘솔

```
npm run test:e2e
```

=> ERROR<br>
=> .expect('Welcome to my Movie API');로 수정 ) SUCCESS

- 테스트 할 경우 살펴보기
  _movies.controller.ts_

- getAll() 테스트

```typescript
describe("/movies", () => {
  it("GET", () => {
    return request(app.getHttpServer()).get("/movies").expect(200).expect([]);
  });
});
```

=> supertest라이브러리에서 가져온 request를 리턴 함<br>
=> getHttpsServer() ) http://localhost:3000/ 같은 부분을 쓰지 않기 위함<br>
=> Json은 안되니 배열로 expect함

- create 테스트
  => POST

```typescript
it("POST", () => {
  return request(app.getHttpServer())
    .post("/movies")
    .send({
      title: "Test",
      year: 2000,
      genres: ["test"],
    })
    .expect(201);
});
```

=> 서버에 request해서 movies에 post할 때,<br>
이 정보를 보내면 201을 받는지 테스트 함

- delete테스트

```typescript
it("DELETE", () => {
  return request(app.getHttpServer()).delete("/movies").expect(404);
});
```

=> 반드시 테스트 할 필요는 없음
